name: ğŸ› Bug en Trading System
description: Reportar un bug crÃ­tico en el sistema de trading QBTC-UNIFIED
title: "[BUG] "
labels: ["bug", "trading-system", "needs-triage"]
assignees:
  - vigoferrel
body:
  - type: markdown
    attributes:
      value: |
        ## âš ï¸ ADVERTENCIA CRÃTICA
        Si este bug involucra **dinero real** o **pÃ©rdidas financieras**, marca como urgente y contacta inmediatamente por email.
        
        ğŸš¨ **Para emergencias**: support@qbtc-unified.com
        
  - type: dropdown
    id: severity
    attributes:
      label: Severidad del Bug
      description: Â¿QuÃ© tan crÃ­tico es este bug?
      options:
        - "ğŸ”´ CRÃTICO - PÃ©rdidas de dinero real"
        - "ğŸŸ  ALTO - Sistema no funciona"
        - "ğŸŸ¡ MEDIO - Funcionalidad degradada"
        - "ğŸŸ¢ BAJO - Problema cosmÃ©tico"
    validations:
      required: true

  - type: dropdown
    id: component
    attributes:
      label: Componente Afectado
      description: Â¿QuÃ© parte del sistema tiene el problema?
      options:
        - "Portfolio Manager (14801)"
        - "Leonardo IA Server (8090)"
        - "Guardian System (14601)"
        - "Metrics Server (14701)"
        - "Quantum Cache System"
        - "Binance API Integration"
        - "Risk Management (VaR/Kelly)"
        - "Sistema Completo"
    validations:
      required: true

  - type: dropdown
    id: environment
    attributes:
      label: Entorno
      description: Â¿DÃ³nde ocurriÃ³ el problema?
      options:
        - "ğŸ§ª Testnet (desarrollo)"
        - "ğŸš¢ Staging (pre-producciÃ³n)"
        - "ğŸŒŸ ProducciÃ³n (Â¡CUIDADO!)"
        - "ğŸ’» Local development"
    validations:
      required: true

  - type: textarea
    id: bug_description
    attributes:
      label: DescripciÃ³n del Bug
      description: Describe claramente quÃ© pasÃ³ y quÃ© esperabas que pasara
      placeholder: |
        Ejemplo: "El Portfolio Manager calculÃ³ incorrectamente el tamaÃ±o de posiciÃ³n usando Kelly Criterion, 
        resultando en una posiciÃ³n de $50k cuando deberÃ­a haber sido mÃ¡ximo $20k..."
    validations:
      required: true

  - type: textarea
    id: financial_impact
    attributes:
      label: ğŸ’° Impacto Financiero
      description: Si hubo pÃ©rdidas monetarias, detalla el impacto
      placeholder: |
        - PÃ©rdida estimada: $XXX USD
        - Posiciones afectadas: BTC, ETH, etc.
        - Capital total en riesgo: $XXX USD
        - Â¿Se activaron circuit breakers?: SÃ­/No
    validations:
      required: false

  - type: textarea
    id: reproduction_steps
    attributes:
      label: ğŸ”„ Pasos para Reproducir
      description: Pasos especÃ­ficos para reproducir el bug
      placeholder: |
        1. Iniciar Portfolio Manager con capital de $100k
        2. Configurar VaR mÃ¡ximo al 2%
        3. Ejecutar anÃ¡lisis de Kelly Criterion para BTC
        4. Observar cÃ¡lculo incorrecto de tamaÃ±o de posiciÃ³n
        5. Ver error en logs...
    validations:
      required: true

  - type: textarea
    id: trading_context
    attributes:
      label: ğŸ“Š Contexto de Trading
      description: InformaciÃ³n del estado del sistema al momento del bug
      placeholder: |
        - Portfolio VaR actual: X.XX%
        - Posiciones activas: BTC, ETH, etc.
        - Leonardo Consciousness Level: XX.X%
        - Coherence Score: XX.X%
        - Volatilidad del mercado: Alta/Media/Baja
        - SÃ­mbolos en Quantum Cache: XXX
    validations:
      required: false

  - type: textarea
    id: system_logs
    attributes:
      label: ğŸ“‹ Logs del Sistema
      description: Logs relevantes (REMOVER cualquier API key o informaciÃ³n sensible)
      placeholder: |
        ```
        [2025-09-05 04:42:26] ERROR Portfolio Manager: Kelly calculation failed
        [2025-09-05 04:42:26] ERROR VaR calculation returned NaN
        [2025-09-05 04:42:26] WARN Guardian System: Position size exceeds limit
        ```
    validations:
      required: false

  - type: textarea
    id: system_info
    attributes:
      label: ğŸ–¥ï¸ InformaciÃ³n del Sistema
      description: Detalles tÃ©cnicos del entorno
      placeholder: |
        - OS: Windows 11 / Ubuntu 22.04 / macOS 13
        - Node.js: v18.17.0
        - npm: v9.8.1
        - Memoria RAM: 16GB
        - QBTC-UNIFIED Version: v2.0.1
        - Binance API: Testnet / Production
    validations:
      required: true

  - type: textarea
    id: metrics_snapshot
    attributes:
      label: ğŸ“ˆ Snapshot de MÃ©tricas
      description: Estado de las mÃ©tricas al momento del error
      placeholder: |
        ```json
        {
          "portfolio_var": 0.025,
          "sharpe_ratio": 1.2,
          "total_positions": 5,
          "leonardo_consciousness": 0.943,
          "quantum_cache_hit_rate": 0.97,
          "system_uptime": 86400000
        }
        ```
    validations:
      required: false

  - type: checkboxes
    id: security_check
    attributes:
      label: ğŸ”’ VerificaciÃ³n de Seguridad
      description: Confirma que has removido informaciÃ³n sensible
      options:
        - label: He removido todas las API keys del reporte
          required: true
        - label: He removido informaciÃ³n personal/financiera sensible
          required: true
        - label: Los logs no contienen credenciales o tokens
          required: true

  - type: checkboxes
    id: attempted_fixes
    attributes:
      label: ğŸ”§ Intentos de SoluciÃ³n
      description: Â¿QuÃ© has intentado para resolver el problema?
      options:
        - label: Reiniciar los servicios afectados
        - label: Verificar configuraciÃ³n (.env)
        - label: Revisar logs completos
        - label: Probar en Testnet
        - label: Consultar documentaciÃ³n tÃ©cnica
        - label: Ejecutar health checks del sistema

  - type: textarea
    id: additional_context
    attributes:
      label: ğŸ“ Contexto Adicional
      description: Cualquier informaciÃ³n adicional que pueda ayudar
      placeholder: |
        - Â¿Es la primera vez que ocurre?
        - Â¿Hay algÃºn patrÃ³n temporal?
        - Â¿Coincide con alta volatilidad del mercado?
        - Â¿Otros usuarios reportaron problemas similares?
    validations:
      required: false
